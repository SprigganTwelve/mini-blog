{% extends 'base.html.twig' %}

{% block title %} Posts!{% endblock %}


{% block stylesheets %}
<style>
  :root {
    --bg: #f8fafc;
    --card-bg: #ffffff;
    --text-main: #0f172a;
    --text-muted: #64748b;
    --primary: #4f46e5;
    --radius: 14px;
    --shadow-soft: 0 8px 24px rgba(15, 23, 42, 0.08);
    --shadow-strong: 0 18px 45px rgba(15, 23, 42, 0.16);
  }

  body {
    background: var(--bg);
    color: var(--text-main);
    font-family: Inter, -apple-system, BlinkMacSystemFont,
      "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  }

  /* Layout */
  .container {
    width: 100%;
    padding: 3rem 1rem;
    display: flex;
    justify-content: center;
  }

  .container .wrapper {
    width: 100%;
    max-width: 1200px;
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 26px;
  }

  /* Intro block */
  .text-block {
    grid-column: 1 / -1;
    margin-bottom: 2rem;
    animation: fadeUp .8s ease both;
  }

  .title {
    font-size: clamp(1.9rem, 3vw, 2.6rem);
    font-weight: 700;
    letter-spacing: -0.03em;
    margin-bottom: .75rem;
  }

  .desc {
    max-width: 900px;
    font-size: 1rem;
    line-height: 1.75;
    color: var(--text-muted);
  }

  /* Cards */
  .container .card {
    cursor: pointer;
    border-radius: var(--radius);
    background: var(--card-bg);
    overflow: hidden;
    box-shadow: var(--shadow-soft);
    display: flex;
    flex-direction: column;
    transform: translateY(12px);
    opacity: 0;
    animation: cardEnter .6s ease forwards;
    transition:
      transform .35s ease,
      box-shadow .35s ease;
  }

  /* Stagger animation */
  .container .card:nth-child(1) { animation-delay: .05s }
  .container .card:nth-child(2) { animation-delay: .1s }
  .container .card:nth-child(3) { animation-delay: .15s }
  .container .card:nth-child(4) { animation-delay: .2s }
  .container .card:nth-child(5) { animation-delay: .25s }

  .container .card:hover {
    transform: translateY(-8px);
    box-shadow: var(--shadow-strong);
  }

  .container .card img {
    width: 100%;
    height: 170px;
    object-fit: cover;
    background: #e5e7eb;
    transition: transform .6s ease;
  }

  .container .card:hover img {
    transform: scale(1.05);
  }

  /* Card content */
  .card-body {
    padding: 1.1rem 1.2rem 1.3rem;
    display: flex;
    flex-direction: column;
    height: 100%;
  }

  .card-title {
    font-size: 1.05rem;
    font-weight: 600;
    margin-bottom: .4rem;
    letter-spacing: -0.01em;
  }

  .card-text {
    flex-grow: 1;
    font-size: .95rem;
    line-height: 1.55;
    color: var(--text-muted);
    overflow: hidden;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
  }

  .card-actions {
    margin-top: .9rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: .8rem;
  }

  .card-actions a {
    color: var(--primary);
    font-weight: 500;
    text-decoration: none;
    margin-right: .6rem;
    position: relative;
  }

  .card-actions a::after {
    content: "";
    position: absolute;
    left: 0;
    bottom: -2px;
    width: 0;
    height: 1px;
    background: currentColor;
    transition: width .25s ease;
  }

  .card-actions a:hover::after {
    width: 100%;
  }

  .card-actions small {
    color: var(--text-muted);
  }

  /* Animations */
  @keyframes fadeUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes cardEnter {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Mobile */
  @media (max-width: 640px) {
    .container {
      padding: 2rem 1rem;
    }

    .desc {
      font-size: .95rem;
    }
  }
</style>
{% endblock %}



{% block body %}
<!-- route: pages_post -->

<div class="container">

  <div class="wrapper">
    <div "text-block">
      <h1 class="title">Explorer, créer et partager le web de demain</h1>
      <p class="desc">
        Ce site est un espace dédié à la découverte, à l’apprentissage et au partage autour du développement web et des technologies modernes. Vous y trouverez des articles approfondis, des tutoriels pratiques et des retours d’expérience sur des sujets variés comme PHP, Symfony, les bonnes pratiques de développement et la conception d’applications web robustes.
L’objectif est de proposer un contenu clair, structuré et accessible, aussi bien aux débutants qu’aux développeurs souhaitant approfondir leurs connaissances et rester à jour avec les évolutions du web.
      </p>
    </div>


    {% for post in posts %}
      <div
        class="card"
        onclick="window.location.href='{{ path('page_post', {id: post.id}) }}'"
      >
        {% if post.picture is empty %}
          <img
            src="https://upload.wikimedia.org/wikipedia/commons/a/ac/No_image_available.svg"
            alt="No image"
          >
        {% else %}
          <img
            src="{{ post.picture }}"
            alt="{{ post.title }}"
          >
        {% endif %}

        <div class="card-body">
          <h5 class="card-title">{{ post.title | nl2br  }}</h5>

          <p class="card-text">
            {{ post.content | slice(0, 125) | nl2br  }} 
          </p>

          <div class="card-actions">
            {% if role == "ROLE_ADMIN" %}
              <div>
                <a href="{{ path('page_post_edit', {id: post.id }) }}">edit</a>
                <a href="{{ path('post_delete', {id: post.id }) }}">delete</a>
              </div>
            {% endif %}

            <small class="text-muted">
              Last updated 3 mins ago
            </small>
          </div>
        </div>
      </div>
    {% endfor %}

  </div>
</div>

{% endblock %}
